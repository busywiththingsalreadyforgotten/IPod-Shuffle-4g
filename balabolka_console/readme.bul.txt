Balabolka (конзолно приложение), версия 1.25
Авторски права (c) 2013-2015 Илия Морозов
Всички права запазени

Уебсайт: http://www.cross-plus-a.com/bg/bconsole.htm
Е-поща: crossa@list.ru

Лиценз: Безплатен (Freeware)
Операционни системи: Microsoft Windows XP/Vista/7/8/10
Speech API: 4.0/5.0
Microsoft Speech Platform



*** Синтаксис ***

balabolka_console.exe [опции ...]


*** Опции на командния ред ***

-l
   Извежда на екрана списъка с наличните гласове.

-g
   Извежда на екрана списъка с налични звукови устройства.

-f <текстов_файл>
   Задава името на входния текстов файл.

-w <звуков_файл>
   Задава името на изходния файл в WAV формат. Ако опцията е зададена, ще бъде създаден аудио файл. Иначе, текста ще бъде прочетен на глас.

-n <име_на_гласа>
   Задава кой глас ще бъде използван (името на гласа е достатъчно). Ако опцията не е зададена, ще бъде използван гласа зададен по подразбиране в Windows.

-id <целочислена_стойност>
   Задава регионалния идентификатор (Locale ID) за гласа. Регионалният идентификатор е езиковия код, зададен от Microsoft (например "1026" за "Български",
   "1033" за "Английски - САЩ"). Програмата ще избере първия глас със зададен регионален идентификатор от списъка с гласове.
   Ако тази настройка не е зададена, гласът зададен с настройката [-n] или гласът по подразбиране в Windows ще бъде използван.
   Списъкът с регионални идентификатори, може да бъде открит на следния уеб адрес: 
   http://msdn.microsoft.com/en-us/goglobal/bb964664.aspx

-m
   Извежда на екрана параметрите на гласа.

-b <целочислена стойност>
   Задава изходното звуково устройство според неговия индекс. Индексът на подразбиращото се звуково устройство е 0.

-c
   За вход се използва текста от клипборда.

-t <текст>
   За вход може да се използва текст от командния ред.

-i
   За вход се използва текста от STDIN.

-o
   SAPI 4: Не се използва.
   SAPI 5 и Microsoft Speech Platform: Записва звуковите данни в STDOUT; ако е зададена тази опция, опцията [-w] бива игнорирана.

-s <целочислена_стойност>
   SAPI 4: Задава скоростта в обхват от 0 до 100 (няма стойност по подразбиране).
   SAPI 5 и Microsoft Speech Platform: Задава скоростта в обхват от -10 до 10 (по подразбиране е 0).

-p <целочислена_стойност>
   SAPI 4: Задава височината на гласа в обхват от 0 до 100 (няма стойност по подразбиране).
   SAPI 5 и Microsoft Speech Platform: Задава височината на гласа в обхват от -10 до 10 (по подразбиране е 0).

-v <целочислена_стойност>
   SAPI 4: Не се използва.
   SAPI 5 и Microsoft Speech Platform: Задава силата на звука в обхват от 0 до 100 (по подразбиране е 100).

-e <целочислена_стойност>
   Задава дължината на паузите между изреченията (в милисекунди). По подразбиране е 0.

-a <целочислена_стойност>
   Задава паузите между абзаците (в милисекунди). По подразбиране е 0.

-d <име_на_файл>
   Използва се речник за корекция на произношението (*.REX или *.DIC). Командния ред може да съдържа повече от една опция [-d].

-k
   Прекратява процесите на други копия на приложението в паметта на компютъра.

-ka
   Kills the active copy of the console application in the computer's memory.

-q
   Добавя приложението в опашка. Конзолното приложение ще изчака докато другите копия на приложението приключат с работата си.

-lrc
   SAPI 4: Не се използва.
   SAPI 5 и Microsoft Speech Platform: Създава LRC файл, ако параметрите [-w] или [-o] са зададени.

-sub
   SAPI 4: Не се използва.
   SAPI 5 и Microsoft Speech Platform: Текстът ще бъде обработван като субтитри. 
   Параметърът може да е полезен, когато са зададени параметрите [-i] или [-c].

-tray
   Показване на иконата на програмата в областта за уведомяване. Това ви позволява да следите напредъка на изпълняваната задача.
   Командата "Спри" в контекстното меню може да се използва за спиране на процеса.

-ln <целочислена_стойност>
   Selects a line from the text file by using of a line number. The line numbering starts at "1".
   The interval of numbers can be used for selecting of more than one line (for example, "26-34").
   Командния ред може да съдържа повече от една опция [-ln].

-? или -h
   Извежда на екрана списъка с поддържаните опции за командния ред.

--encoding <кодиране> или -enc <кодиране>
   Задава кодирането на входния текст ("ansi", "utf8" или "unicode"). Кодирането по подразбиране е "ansi".

--silence-begin <целочислена_стойност> или -sb <целочислена_стойност>
   Задава времетраенето на тишината в началото на аудио файла (в милисекунди). По подразбиране е 0.

--silence-end <целочислена_стойност> или -se <целочислена_стойност>
   Задава времетраенето на тишината в края на аудио файла (в милисекунди). По подразбиране е 0.

--lrc-length <целочислена_стойност>
   Задава максималната дължина на редовете в LRC файла (в брой знаци).

--lrc-filename <име_на_файл>
   Задава името на LRC файла. Параметърът би бил полезен, когато е зададен параметъра [-o].

--lrc-encoding <кодиране>
   Задава кодирането на LRC файла ("ansi", "utf8" или "unicode"). Кодирането по подразбиране е "ansi".

--lrc-offset <целочислена_стойност>
   Задава времевото отместване за LRC файла (в милисекунди).

--lrc-artist <текст>
   Задава ID тага за LRC файла: изпълнител.

--lrc-album <текст>
   Задава ID тага за LRC файла: албум.

--lrc-title <текст>
   Задава ID тага за LRC файла: заглавие.

--lrc-author <текст>
   Задава ID тага за LRC файла: автор.

--lrc-creator <текст>
   Задава ID тага за LRC файла: създател на LRC файла.

--raw
   SAPI 4: Не се използва.
   SAPI 5 и Microsoft Speech Platform: Изходният аудио файл е в суров PCM формат; аудио данните не съдържат WAV заглавката. 
   Този параметър се използва в комбинация с параметъра [-o].

--ignorelength
   SAPI 4: Не се използва.
   SAPI 5 и Microsoft Speech Platform: Пропуска определената дължина от данни в WAV заглавката. 
   Този параметър се използва в комбинация с параметъра [-o].

--sub-format <текст>
   Задава формата на субтитрите ("srt", "ssa", "ass" или "smi"). Ако параметърът не е зададен, форматът ще бъде определен чрез файловото разширение.

--sub-fit или -sf
   Автоматично увеличава скоростта, за да съвпадне с времевите интервали на субтитрите (когато програмата конвертира субтитри в аудио файл).

--sub-max <целочислена_стойност> или -sm <целочислена_стойност>
   Задава максималната скорост на речта в обхвата от -10 до 10 (когато програмата конвертира субтитри в аудио файл).

--deletefile или -df
   Премахва текстовия файл, когато задачата бъде завършена. Този параметър се използва в комбинация с параметъра [-f].


*** Примери ***

balabolka_console.exe -l

balabolka_console.exe -n "Microsoft Anna" -m

balabolka_console.exe -f "d:\Text\book.txt" -w "d:\Sound\book.wav" -n "Emma"

balabolka_console.exe -n "Callie" -c -d "d:\rex\rules.rex" -d "d:\dic\rules.dic"

balabolka_console.exe -n "Irina" -t "Текстът ще бъде прочетен бавно." -s -5 -v 70

balabolka_console.exe -k

balabolka_console.exe -f "d:\Text\book.txt" -w "d:\Sound\book.wav" -lrc --lrc-length 80 --lrc-title "The Lord of the Rings"

balabolka_console.exe -f "d:\Text\film.srt" -w "d:\Sound\film.wav" -n "Laura" --sub-fit --sub-max 2


The example of use together with LAME.EXE:

balabolka_console.exe -f d:\book.txt -n Irina -o --raw | lame.exe -r -s 22.05 -m m -h - d:\book.mp3


The example of use together with OGGENC2.EXE:

balabolka_console.exe -f d:\book.txt -n Irina -o --ignorelength | oggenc2.exe --ignorelength - -o d:\book.ogg


The example of use together with WMAENCODE.EXE:

balabolka_console.exe -f d:\book.txt -n Irina -o --ignorelength | wmaencode.exe - d:\book.wma --ignorelength


*** Конфигурационен файл ***

Опциите за командния ред може да бъдат съхранени в конфигурационен файл с име "balabolka_console.cfg" в същата папка, в която е и конзолното приложение.

Пример за конфигурационен файл:
===============
-f d:\Text\book.txt
-w d:\Sound\book.wav
-n Microsoft Anna
-s 2
-p -1
-v 95
-e 300
-d d:\rex\rules.rex
-d d:\dic\rules.dic
-lrc
--lrc-length 75
--lrc-encoding utf8
--lrc-offset 300
===============

Програмата може да използва комбинация от опции от конфигурационния файл и от командния ред.


*** Звукови клипове ***

Програмата позволява вмъкването на препратки към външни WAV файлове (звукови клипове) в текста. Тагът за звуковите клипове, би изглеждал по следния начин:

{{Audio=C:\Sounds\ring.wav}}

При прочитането на текста на глас, програмата ще спре когато тагът за звуковия клип бъде достигнат, ще възпроизведе звуковия клип и ще поднови четенето на глас.
При конвертирането в аудио файлове, звуковият клип ще бъде вграден в създадения от програмата аудио файл.

###